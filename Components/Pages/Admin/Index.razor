@page "/Index"
@using DIGESA.Models.Entities.DBDIGESA
@using DIGESA.Repositorios.Interfaces
@using Microsoft.EntityFrameworkCore
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject IUserData _UserService
@inject IDbContextFactory<DbContextDigesa> ContextFactory

<div class="row mt-0">
    <div class="col-lg-6 col-md-12 col-sm-12">
        <div class="card py-2">
            <div class="card-body">
                <h5 class="card-title border-bottom py-2">MINISTERIO DE SALUD</h5>
                <p class="card-text">SISTEMA DE GESTION DE SALUD AMBIENTAL (SDGSA)</p>
                <p class="card-text">Usuario: @LoggedUser.FirstName @LoggedUser.LastName</p>
            </div>
        </div>
    </div>

    <AuthorizeView Roles="user_public,user_admin">
        <div class="col-lg-6 col-md-12 col-sm-12">
            <div class="card py-2">
                <div class="card-body">
                    <h5 class="card-title border-bottom py-2">MI PERFIL</h5>

                    <div class="row">
                        @foreach (var a in PanelAcciones)
                        {
                            <div class="col-lg-6 col-md-6 col-sm-12 mb-2">
                                <div class="accion-card h-100"
                                     style="--accent: @a.Borde; cursor:pointer;"
                                     @onclick="() => IrA(a.Route)">
                                    <div class="card-body d-flex align-items-center">
                                        <i class="fa-solid @a.Icono accion-icon text-@a.Color me-3"></i>
                                        <p class="accion-title mb-0">@a.Titulo</p>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                </div>
            </div>
        </div>
    </AuthorizeView>
</div>

<div class="row mt-0">
    <AuthorizeView Roles="user_admin,user_registros">
        <div class="col-lg-6 col-md-12 col-sm-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title border-bottom py-2 mb-3">SOLICITUDES DE REGISTROS</h5>
                    <div class="row g-3 px-1 pb-3">
                        @foreach (var e in PanelEstados)
                        {
                            <div class="col-6">
                                <div class="estado-card"
                                     style="--accent: @e.Borde; cursor:pointer;"
                                     @onclick="() => IrAPanelEstado(e.Clave)">
                                    <div class="card-body d-flex align-items-center justify-content-between">
                                        <div class="d-flex align-items-center">
                                            <i class="fa-solid @e.Icono estado-icon text-@e.Color me-3"></i>
                                            <div>
                                                <p class="estado-title mb-1">@e.Titulo</p>
                                                <p class="estado-sub mb-0">@e.Subtitulo</p>
                                            </div>
                                        </div>
                                        <span class="badge estado-badge text-@e.Color">@e.Cantidad</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </AuthorizeView>
</div>

<DynamicModal @ref="ModalForm" />
