@page "/Admin/Indexboard"
@using DIGESA.Components.Pages.Componentes
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles = "Administrador")]

@if (isLoading)
{
    <div class="d-flex justify-content-center align-items-center" style="height:300px;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
    </div>
}
else
{
    <div class="container mt-4">
        <h2 class="mb-4 text-center text-success">
            Bienvenido, @LoggedUser.FirstName @LoggedUser.LastName
        </h2>

        <div class="row mb-4">
            @foreach (var accion in PanelAcciones)
            {
                <div class="col-md-6 mb-3">
                    <div class="card shadow-sm border-2 border-@accion.Color"
                         style="cursor:pointer;"
                         @onclick="@(() => IrA(accion.Route))">
                        <div class="card-body text-center text-@accion.Color">
                            <i class="fa-solid @accion.Icono fa-2x mb-2"></i>
                            <h5>@accion.Titulo</h5>
                        </div>
                    </div>
                </div>
            }
        </div>

        <h4 class="mb-3 text-secondary">Resumen de Solicitudes</h4>
        <div class="row">
            @foreach (var panel in PanelEstados)
            {
                <div class="col-md-3 mb-3">
                    <div class="card shadow-sm"
                         style="background-color:@panel.Fondo; border-left:5px solid @panel.Borde; cursor:pointer;"
                         @onclick="@(() => IrAPanelEstado(panel.Clave))">
                        <div class="card-body text-center">
                            <i class="fa-solid @panel.Icono fa-2x text-@panel.Color mb-2"></i>
                            <h5 class="fw-bold">@panel.Titulo</h5>
                            <p class="text-muted">@panel.Subtitulo</p>
                            <h4>@panel.Cantidad</h4>
                        </div>
                    </div>
                </div>
            }
        </div>

        <h4 class="mt-5 mb-3 text-secondary">Solicitudes Pendientes o en Revisión</h4>
        <SolicitudLista />
    </div>
}
<DynamicModal @ref="ModalForm" />
