@* @page "/registro-paciente" *@
@* @using System.ComponentModel.DataAnnotations *@
@* *@
@* <PageTitle>Formulario de Registro de Pacientes - Cannabis Medicinal</PageTitle> *@
@* *@
@* <div class="container-fluid py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh;"> *@
@*     <div class="row justify-content-center"> *@
@*         <div class="col-12 col-lg-10 col-xl-8"> *@
@*             <div class="card shadow-lg border-0" style="border-radius: 15px; overflow: hidden;"> *@
@*                 <!-- Header --> *@
@*                 <div class="card-header text-white p-4" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);"> *@
@*                     <div class="text-center"> *@
@*                         <h1 class="h2 fw-light mb-2">Formulario de Usuarios de Cannabis Medicinal y Acompañantes Autorizados</h1> *@
@*                         <h2 class="h4 mb-3">Usuario de Cannabis Medicinal</h2> *@
@*                         <div class="row justify-content-center"> *@
@*                             <div class="col-md-4"> *@
@*                                 <div class="p-3 rounded" style="background: rgba(255,255,255,0.2);"> *@
@*                                     <label class="form-label text-white fw-bold">Fecha de solicitud:</label> *@
@*                                     <input type="date" class="form-control" @bind="model.FechaSolicitud" /> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@*                     </div> *@
@*                 </div> *@
@* *@
@*                 <div class="card-body p-4"> *@
@*                     <EditForm Model="model" OnValidSubmit="HandleValidSubmit"> *@
@*                         <DataAnnotationsValidator /> *@
@* *@
@*                         <!-- Sección 1: Datos Personales del Solicitante --> *@
@*                         <div class="section-container mb-5"> *@
@*                             <div class="section-header"> *@
@*                                 <h3 class="section-title">1. DATOS PERSONALES DEL SOLICITANTE</h3> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">1.1 Nombre completo del paciente:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.NombreCompleto" required /> *@
@*                                     <ValidationMessage For="@(() => model.NombreCompleto)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">1.2 Documento de identidad:</label> *@
@*                                     <div class="mt-2"> *@
@*                                         <div class="form-check form-check-inline"> *@
@*                                             <input class="form-check-input" type="radio" name="tipoDocumento" id="cedula"  *@
@*                                                    @onchange="@(() => model.TipoDocumento = "cedula")" checked="@(model.TipoDocumento == "cedula")" /> *@
@*                                             <label class="form-check-label" for="cedula">Cédula</label> *@
@*                                         </div> *@
@*                                         <div class="form-check form-check-inline"> *@
@*                                             <input class="form-check-input" type="radio" name="tipoDocumento" id="pasaporte"  *@
@*                                                    @onchange="@(() => model.TipoDocumento = "pasaporte")" checked="@(model.TipoDocumento == "pasaporte")" /> *@
@*                                             <label class="form-check-label" for="pasaporte">Pasaporte</label> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">1.2.1 Número del documento:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.NumeroDocumento" required /> *@
@*                                     <ValidationMessage For="@(() => model.NumeroDocumento)" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">1.3 Nacionalidad:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.Nacionalidad" required /> *@
@*                                     <ValidationMessage For="@(() => model.Nacionalidad)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">1.4 Fecha de nacimiento:</label> *@
@*                                     <input type="date" class="form-control" @bind="model.FechaNacimiento" required /> *@
@*                                     <ValidationMessage For="@(() => model.FechaNacimiento)" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">1.5 Sexo:</label> *@
@*                                     <div class="mt-2"> *@
@*                                         <div class="form-check form-check-inline"> *@
@*                                             <input class="form-check-input" type="radio" name="sexo" id="femenino"  *@
@*                                                    @onchange="@(() => model.Sexo = "femenino")" checked="@(model.Sexo == "femenino")" /> *@
@*                                             <label class="form-check-label" for="femenino">Femenino</label> *@
@*                                         </div> *@
@*                                         <div class="form-check form-check-inline"> *@
@*                                             <input class="form-check-input" type="radio" name="sexo" id="masculino"  *@
@*                                                    @onchange="@(() => model.Sexo = "masculino")" checked="@(model.Sexo == "masculino")" /> *@
@*                                             <label class="form-check-label" for="masculino">Masculino</label> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">1.6 Residencia (Lugar donde reside la mayor parte del tiempo):</label> *@
@*                                     <input type="text" class="form-control" @bind="model.Residencia"  *@
@*                                            placeholder="Provincia, distrito, corregimiento, barriada, calle, casa/edificio/apartamento, n°" required /> *@
@*                                     <ValidationMessage For="@(() => model.Residencia)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">1.7 Teléfono residencial:</label> *@
@*                                     <input type="tel" class="form-control" @bind="model.TelefonoResidencial" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">Teléfono personal:</label> *@
@*                                     <input type="tel" class="form-control" @bind="model.TelefonoPersonal" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-4"> *@
@*                                     <label class="form-label fw-bold">1.8 Correo electrónico:</label> *@
@*                                     <input type="email" class="form-control" @bind="model.CorreoElectronico" required /> *@
@*                                     <ValidationMessage For="@(() => model.CorreoElectronico)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">1.9 Instalación de salud donde es atendido:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.InstalacionSalud" required /> *@
@*                                     <ValidationMessage For="@(() => model.InstalacionSalud)" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">1.9.1 Región de salud:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.RegionSalud" required /> *@
@*                                     <ValidationMessage For="@(() => model.RegionSalud)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="alert alert-warning"> *@
@*                                 <label class="fw-bold">1.10 ¿Requiere acompañante autorizado?</label> *@
@*                                 <p class="mb-2">Acompañante autorizado es toda aquel madre o padre con patria potestad o tutor designado por un Tribunal competente.  *@
@*                                    Esto aplica a toda paciente usuario de Cannabis medicinal <strong>MENOR DE EDAD</strong> o paciente  *@
@*                                    <strong>MAYOR DE EDAD CON DISCAPACIDAD FÍSICA O MENTAL</strong>.</p> *@
@*                                 <div class="mt-3"> *@
@*                                     <div class="form-check form-check-inline"> *@
@*                                         <input class="form-check-input" type="radio" name="requiereAcompanante" id="acompanante-si"  *@
@*                                                @onchange="@(() => { model.RequiereAcompanante = true; })" checked="@model.RequiereAcompanante" /> *@
@*                                         <label class="form-check-label" for="acompanante-si">Sí</label> *@
@*                                     </div> *@
@*                                     <div class="form-check form-check-inline"> *@
@*                                         <input class="form-check-input" type="radio" name="requiereAcompanante" id="acompanante-no"  *@
@*                                                @onchange="@(() => { model.RequiereAcompanante = false; })" checked="@(!model.RequiereAcompanante)" /> *@
@*                                         <label class="form-check-label" for="acompanante-no">No</label> *@
@*                                     </div> *@
@*                                 </div> *@
@* *@
@*                                 @if (model.RequiereAcompanante) *@
@*                                 { *@
@*                                     <div class="mt-3"> *@
@*                                         <label class="fw-bold">1.10.1 Motivo por el cual requiere acompañante autorizado:</label> *@
@*                                         <div class="mt-2"> *@
@*                                             <div class="form-check"> *@
@*                                                 <input class="form-check-input" type="radio" name="motivoAcompanante" id="menor-edad"  *@
@*                                                        @onchange="@(() => model.MotivoAcompanante = "menor")" checked="@(model.MotivoAcompanante == "menor")" /> *@
@*                                                 <label class="form-check-label" for="menor-edad">Paciente menor de edad</label> *@
@*                                             </div> *@
@*                                             <div class="form-check"> *@
@*                                                 <input class="form-check-input" type="radio" name="motivoAcompanante" id="discapacidad"  *@
@*                                                        @onchange="@(() => model.MotivoAcompanante = "discapacidad")" checked="@(model.MotivoAcompanante == "discapacidad")" /> *@
@*                                                 <label class="form-check-label" for="discapacidad">Paciente mayor de edad con discapacidad física o mental</label> *@
@*                                             </div> *@
@*                                         </div> *@
@*                                         @if (model.MotivoAcompanante == "discapacidad") *@
@*                                         { *@
@*                                             <div class="mt-3"> *@
@*                                                 <label class="form-label">Especifique la discapacidad:</label> *@
@*                                                 <input type="text" class="form-control" @bind="model.EspecificarDiscapacidad" /> *@
@*                                             </div> *@
@*                                         } *@
@*                                     </div> *@
@*                                 } *@
@*                             </div> *@
@*                         </div> *@
@* *@
@*                         <!-- Sección 2: Datos del Acompañante --> *@
@*                         @if (model.RequiereAcompanante) *@
@*                         { *@
@*                             <div class="section-container mb-5"> *@
@*                                 <div class="section-header"> *@
@*                                     <h3 class="section-title">2. DATOS PERSONALES DEL ACOMPAÑANTE AUTORIZADO</h3> *@
@*                                 </div> *@
@* *@
@*                                 <div class="row mb-3"> *@
@*                                     <div class="col-12"> *@
@*                                         <label class="form-label fw-bold">2.1 Nombre completo del acompañante autorizado:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.NombreAcompanante" /> *@
@*                                     </div> *@
@*                                 </div> *@
@* *@
@*                                 <div class="row mb-3"> *@
@*                                     <div class="col-md-4"> *@
@*                                         <label class="form-label fw-bold">2.2 Documento de identidad:</label> *@
@*                                         <div class="mt-2"> *@
@*                                             <div class="form-check form-check-inline"> *@
@*                                                 <input class="form-check-input" type="radio" name="tipoDocumentoAcompanante" id="acompanante-cedula"  *@
@*                                                        @onchange="@(() => model.TipoDocumentoAcompanante = "cedula")" checked="@(model.TipoDocumentoAcompanante == "cedula")" /> *@
@*                                                 <label class="form-check-label" for="acompanante-cedula">Cédula</label> *@
@*                                             </div> *@
@*                                             <div class="form-check form-check-inline"> *@
@*                                                 <input class="form-check-input" type="radio" name="tipoDocumentoAcompanante" id="acompanante-pasaporte"  *@
@*                                                        @onchange="@(() => model.TipoDocumentoAcompanante = "pasaporte")" checked="@(model.TipoDocumentoAcompanante == "pasaporte")" /> *@
@*                                                 <label class="form-check-label" for="acompanante-pasaporte">Pasaporte</label> *@
@*                                             </div> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                     <div class="col-md-4"> *@
@*                                         <label class="form-label fw-bold">2.2.1 Número del documento:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.NumeroDocumentoAcompanante" /> *@
@*                                     </div> *@
@*                                     <div class="col-md-4"> *@
@*                                         <label class="form-label fw-bold">2.3 Nacionalidad:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.NacionalidadAcompanante" /> *@
@*                                     </div> *@
@*                                 </div> *@
@* *@
@*                                 <div class="row mb-3"> *@
@*                                     <div class="col-12"> *@
@*                                         <label class="form-label fw-bold">2.4 Parentesco con el paciente:</label> *@
@*                                         <div class="mt-2"> *@
@*                                             <div class="form-check form-check-inline"> *@
@*                                                 <input class="form-check-input" type="radio" name="parentesco" id="madre"  *@
@*                                                        @onchange="@(() => model.Parentesco = "madre")" checked="@(model.Parentesco == "madre")" /> *@
@*                                                 <label class="form-check-label" for="madre">Madre con patria potestad</label> *@
@*                                             </div> *@
@*                                             <div class="form-check form-check-inline"> *@
@*                                                 <input class="form-check-input" type="radio" name="parentesco" id="padre"  *@
@*                                                        @onchange="@(() => model.Parentesco = "padre")" checked="@(model.Parentesco == "padre")" /> *@
@*                                                 <label class="form-check-label" for="padre">Padre con patria potestad</label> *@
@*                                             </div> *@
@*                                             <div class="form-check form-check-inline"> *@
@*                                                 <input class="form-check-input" type="radio" name="parentesco" id="tutor"  *@
@*                                                        @onchange="@(() => model.Parentesco = "tutor")" checked="@(model.Parentesco == "tutor")" /> *@
@*                                                 <label class="form-check-label" for="tutor">Tutor designado</label> *@
@*                                             </div> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@*                         } *@
@* *@
@*                         <!-- Sección 3: Sobre el Médico --> *@
@*                         <div class="section-container mb-5"> *@
@*                             <div class="section-header"> *@
@*                                 <h3 class="section-title">3. SOBRE EL MÉDICO QUE PRESCRIBE</h3> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">3.1 Nombre del Médico tratante responsable de la prescripción:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.NombreMedico" required /> *@
@*                                     <ValidationMessage For="@(() => model.NombreMedico)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">3.2 Disciplina del médico:</label> *@
@*                                     <div class="mt-2"> *@
@*                                         <div class="form-check"> *@
@*                                             <input class="form-check-input" type="radio" name="disciplinaMedico" id="medico-general"  *@
@*                                                    @onchange="@(() => model.DisciplinaMedico = "general")" checked="@(model.DisciplinaMedico == "general")" /> *@
@*                                             <label class="form-check-label" for="medico-general">Médico general</label> *@
@*                                         </div> *@
@*                                         <div class="form-check"> *@
@*                                             <input class="form-check-input" type="radio" name="disciplinaMedico" id="odontologo"  *@
@*                                                    @onchange="@(() => model.DisciplinaMedico = "odontologo")" checked="@(model.DisciplinaMedico == "odontologo")" /> *@
@*                                             <label class="form-check-label" for="odontologo">Médico odontólogo</label> *@
@*                                         </div> *@
@*                                         <div class="form-check"> *@
@*                                             <input class="form-check-input" type="radio" name="disciplinaMedico" id="especialista"  *@
@*                                                    @onchange="@(() => model.DisciplinaMedico = "especialista")" checked="@(model.DisciplinaMedico == "especialista")" /> *@
@*                                             <label class="form-check-label" for="especialista">Médico especialista</label> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">Especifique especialidad:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.EspecialidadMedico" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">3.3 Número de registro de idoneidad:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.NumeroRegistroMedico" required /> *@
@*                                     <ValidationMessage For="@(() => model.NumeroRegistroMedico)" /> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">3.4 Teléfono del médico:</label> *@
@*                                     <input type="tel" class="form-control" @bind="model.TelefonoMedico" required /> *@
@*                                     <ValidationMessage For="@(() => model.TelefonoMedico)" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">3.5 Instalación de salud donde labora el médico:</label> *@
@*                                     <input type="text" class="form-control" @bind="model.InstalacionSaludMedico" required /> *@
@*                                     <ValidationMessage For="@(() => model.InstalacionSaludMedico)" /> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@* *@
@*                         <!-- Sección 4: Cannabis Medicinal --> *@
@*                         <div class="section-container mb-5"> *@
@*                             <div class="section-header"> *@
@*                                 <h3 class="section-title">4. SOBRE EL PACIENTE Y USO DEL CANNABIS MEDICINAL O DERIVADOS</h3> *@
@*                             </div> *@
@* *@
@*                             <div class="card mb-4"> *@
@*                                 <div class="card-body"> *@
@*                                     <h5 class="card-title">4.1 Diagnóstico(s) que justifica el uso de cannabis medicinal:</h5> *@
@*                                     <div class="row"> *@
@*                                         @foreach (var condicion in condicionesMedicas) *@
@*                                         { *@
@*                                             <div class="col-md-6 col-lg-4 mb-2"> *@
@*                                                 <div class="form-check"> *@
@*                                                     <input class="form-check-input" type="checkbox" id="@condicion.Key"  *@
@*                                                            @onchange="@((e) => ToggleCondition(condicion.Key, (bool)e.Value!))" /> *@
@*                                                     <label class="form-check-label" for="@condicion.Key">@condicion.Value</label> *@
@*                                                 </div> *@
@*                                             </div> *@
@*                                         } *@
@*                                     </div> *@
@*                                     <div class="mt-3"> *@
@*                                         <label class="form-label fw-bold">Otro(s), especifique:</label> *@
@*                                         <textarea class="form-control" rows="3" @bind="model.OtrasCondiciones"></textarea> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">4.2 Nombre genérico:</label> *@
@*                                     <div class="mt-2"> *@
@*                                         <div class="form-check"> *@
@*                                             <input class="form-check-input" type="checkbox" id="cbd-check"  *@
@*                                                    @onchange="@((e) => model.UsaCBD = (bool)e.Value!)" /> *@
@*                                             <label class="form-check-label" for="cbd-check">CBD (Cannabidiol)</label> *@
@*                                         </div> *@
@*                                         <div class="form-check"> *@
@*                                             <input class="form-check-input" type="checkbox" id="thc-check"  *@
@*                                                    @onchange="@((e) => model.UsaTHC = (bool)e.Value!)" /> *@
@*                                             <label class="form-check-label" for="thc-check">THC (delta-9-tetrahidrocannabinol)</label> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                     <div class="mt-3"> *@
@*                                         <label class="form-label">Otros, especifique:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.OtrosProductos" /> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">Nombre comercial del producto: (Opcional)</label> *@
@*                                     <input type="text" class="form-control" @bind="model.NombreComercialProducto" placeholder="Nombre del producto" /> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">4.3 Forma Farmacéutica:</label> *@
@*                                     <div class="row mt-2"> *@
@*                                         @foreach (var forma in formasFarmaceuticas) *@
@*                                         { *@
@*                                             <div class="col-md-4 col-lg-3 mb-2"> *@
@*                                                 <div class="form-check"> *@
@*                                                     <input class="form-check-input" type="checkbox" id="@forma.Key"  *@
@*                                                            @onchange="@((e) => ToggleFormaFarmaceutica(forma.Key, (bool)e.Value!))" /> *@
@*                                                     <label class="form-check-label" for="@forma.Key">@forma.Value</label> *@
@*                                                 </div> *@
@*                                             </div> *@
@*                                         } *@
@*                                     </div> *@
@*                                     <div class="mt-3"> *@
@*                                         <label class="form-label">Otro:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.OtraFormaFarmaceutica" /> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="card mb-4"> *@
@*                                 <div class="card-body"> *@
@*                                     <h5 class="card-title">4.4 Concentración:</h5> *@
@*                                      *@
@*                                     <!-- CBD Concentration --> *@
@*                                     <div class="row align-items-center mb-3"> *@
@*                                         <div class="col-md-2"> *@
@*                                             <strong>CBD:</strong> *@
@*                                         </div> *@
@*                                         <div class="col-md-3"> *@
@*                                             <input type="number" class="form-control" step="0.1" @bind="model.ConcentracionCBD" /> *@
@*                                         </div> *@
@*                                         <div class="col-md-6"> *@
@*                                             <div class="d-flex flex-wrap gap-2"> *@
@*                                                 @foreach (var unidad in unidadesMedida) *@
@*                                                 { *@
@*                                                     <div class="form-check"> *@
@*                                                         <input class="form-check-input" type="radio" name="unidadCBD" id="cbd-@unidad"  *@
@*                                                                @onchange="@(() => model.UnidadCBD = unidad)" checked="@(model.UnidadCBD == unidad)" /> *@
@*                                                         <label class="form-check-label" for="cbd-@unidad">@unidad</label> *@
@*                                                     </div> *@
@*                                                 } *@
@*                                             </div> *@
@*                                         </div> *@
@*                                         <div class="col-md-1"> *@
@*                                             <input type="text" class="form-control form-control-sm" placeholder="Otra" @bind="model.OtraUnidadCBD" /> *@
@*                                         </div> *@
@*                                     </div> *@
@* *@
@*                                     <!-- THC Concentration --> *@
@*                                     <div class="row align-items-center mb-3"> *@
@*                                         <div class="col-md-2"> *@
@*                                             <strong>THC:</strong> *@
@*                                         </div> *@
@*                                         <div class="col-md-3"> *@
@*                                             <input type="number" class="form-control" step="0.1" @bind="model.ConcentracionTHC" /> *@
@*                                         </div> *@
@*                                         <div class="col-md-6"> *@
@*                                             <div class="d-flex flex-wrap gap-2"> *@
@*                                                 @foreach (var unidad in unidadesMedida) *@
@*                                                 { *@
@*                                                     <div class="form-check"> *@
@*                                                         <input class="form-check-input" type="radio" name="unidadTHC" id="thc-@unidad"  *@
@*                                                                @onchange="@(() => model.UnidadTHC = unidad)" checked="@(model.UnidadTHC == unidad)" /> *@
@*                                                         <label class="form-check-label" for="thc-@unidad">@unidad</label> *@
@*                                                     </div> *@
@*                                                 } *@
@*                                             </div> *@
@*                                         </div> *@
@*                                         <div class="col-md-1"> *@
@*                                             <input type="text" class="form-control form-control-sm" placeholder="Otra" @bind="model.OtraUnidadTHC" /> *@
@*                                         </div> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-12"> *@
@*                                     <label class="form-label fw-bold">4.5 Vía de administración:</label> *@
@*                                     <div class="row mt-2"> *@
@*                                         @foreach (var via in viasAdministracion) *@
@*                                         { *@
@*                                             <div class="col-md-4 col-lg-3 mb-2"> *@
@*                                                 <div class="form-check"> *@
@*                                                     <input class="form-check-input" type="checkbox" id="@via.Key"  *@
@*                                                            @onchange="@((e) => ToggleViaAdministracion(via.Key, (bool)e.Value!))" /> *@
@*                                                     <label class="form-check-label" for="@via.Key">@via.Value</label> *@
@*                                                 </div> *@
@*                                             </div> *@
@*                                         } *@
@*                                     </div> *@
@*                                     <div class="mt-3"> *@
@*                                         <label class="form-label">Otro:</label> *@
@*                                         <input type="text" class="form-control" @bind="model.OtraViaAdministracion" /> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@* *@
@*                             <div class="card mb-4"> *@
@*                                 <div class="card-body"> *@
@*                                     <h5 class="card-title">4.6 Dosis, Frecuencia y Duración:</h5> *@
@*                                     <div class="table-responsive"> *@
@*                                         <table class="table table-bordered"> *@
@*                                             <thead class="table-light"> *@
@*                                                 <tr> *@
@*                                                     <th>Dosis (cantidad o indicación del médico)</th> *@
@*                                                     <th>Frecuencia</th> *@
@*                                                 </tr> *@
@*                                             </thead> *@
@*                                             <tbody> *@
@*                                                 <tr> *@
@*                                                     <td> *@
@*                                                         <input type="text" class="form-control border-0" @bind="model.Dosis" /> *@
@*                                                     </td> *@
@*                                                     <td> *@
@*                                                         <div class="d-flex align-items-center gap-2 flex-wrap"> *@
@*                                                             <input type="number" class="form-control" style="width: 80px;" @bind="model.VecesAlDia" min="0" /> *@
@*                                                             <span>veces al día</span> *@
@*                                                             <div class="form-check"> *@
@*                                                                 <input class="form-check-input" type="checkbox" id="rescate" @bind="model.DeRescate" /> *@
@*                                                                 <label class="form-check-label" for="rescate">de rescate</label> *@
@*                                                             </div> *@
@*                                                             <div class="form-check"> *@
@*                                                                 <input class="form-check-input" type="checkbox" id="semanal" @bind="model.Semanal" /> *@
@*                                                                 <label class="form-check-label" for="semanal">Semanal</label> *@
@*                                                             </div> *@
@*                                                             <div class="form-check"> *@
@*                                                                 <input class="form-check-input" type="checkbox" id="quincenal" @bind="model.Quincenal" /> *@
@*                                                                 <label class="form-check-label" for="quincenal">Quincenal</label> *@
@*                                                             </div> *@
@*                                                             <div class="form-check"> *@
@*                                                                 <input class="form-check-input" type="checkbox" id="mensual" @bind="model.Mensual" /> *@
@*                                                                 <label class="form-check-label" for="mensual">Mensual</label> *@
@*                                                             </div> *@
@*                                                         </div> *@
@*                                                     </td> *@
@*                                                 </tr> *@
@*                                             </tbody> *@
@*                                         </table> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@* *@
@*                         <!-- Sección 5: Otras Enfermedades --> *@
@*                         <div class="section-container mb-5"> *@
@*                             <div class="section-header"> *@
@*                                 <h3 class="section-title">5. OTRAS ENFERMEDADES QUE PADECE EL PACIENTE</h3> *@
@*                             </div> *@
@*                             <p class="text-muted mb-4"><strong>Nota:</strong> De contar con otras comorbilidades, especifique el/los diagnóstico(s) y el/los tratamiento(s) recibido(s).</p> *@
@*                              *@
@*                             <div class="row mb-3"> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">5.1 Diagnóstico(s):</label> *@
@*                                     <textarea class="form-control" rows="6" @bind="model.OtrosDiagnosticos"  *@
@*                                               placeholder="Especifique otros diagnósticos médicos del paciente..."></textarea> *@
@*                                 </div> *@
@*                                 <div class="col-md-6"> *@
@*                                     <label class="form-label fw-bold">5.2 Tratamiento(s) recibido(s):</label> *@
@*                                     <textarea class="form-control" rows="6" @bind="model.OtrosTratamientos"  *@
@*                                               placeholder="Especifique los tratamientos recibidos para estos diagnósticos..."></textarea> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@* *@
@*                         <!-- Observaciones --> *@
@*                         <div class="section-container mb-5"> *@
@*                             <div class="section-header"> *@
@*                                 <h3 class="section-title">OBSERVACIONES</h3> *@
@*                             </div> *@
@*                             <div class="row"> *@
@*                                 <div class="col-12"> *@
@*                                     <textarea class="form-control" rows="6" @bind="model.Observaciones" placeholder="Observaciones adicionales..."></textarea> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@* *@
@*                     </EditForm> *@
@*                 </div> *@
@* *@
@*                 <!-- Submit Section --> *@
@*                 <div class="card-footer bg-light text-center p-4"> *@
@*                     <button type="submit" class="btn btn-success btn-lg px-5 rounded-pill"  *@
@*                             style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); border: none;" *@
@*                             @onclick="HandleValidSubmit"> *@
@*                         <i class="fas fa-paper-plane me-2"></i>Enviar Formulario *@
@*                     </button> *@
@*                     <p class="mt-3 text-muted small"> *@
@*                         Al enviar este formulario, confirmo que toda la información proporcionada es veraz y completa. *@
@*                     </p> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* </div> *@
@* *@
@* <style> *@
@*     .section-container { *@
@*         border-left: 4px solid #4CAF50; *@
@*         padding-left: 20px; *@
@*         margin-bottom: 2rem; *@
@*     } *@
@* *@
@*     .section-header { *@
@*         margin-bottom: 1.5rem; *@
@*     } *@
@* *@
@*     .section-title { *@
@*         font-size: 1.4rem; *@
@*         color: #333; *@
@*         font-weight: 600; *@
@*         margin-bottom: 0; *@
@*     } *@
@* *@
@*     .form-control:focus { *@
@*         border-color: #4CAF50; *@
@*         box-shadow: 0 0 0 0.2rem rgba(76, 175, 80, 0.25); *@
@*     } *@
@* *@
@*     .form-check-input:checked { *@
@*         background-color: #4CAF50; *@
@*         border-color: #4CAF50; *@
@*     } *@
@* *@
@*     .btn:hover { *@
@*         transform: translateY(-2px); *@
@*         box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3); *@
@*         transition: all 0.3s ease; *@
@*     } *@
@* *@
@*     .card { *@
@*         border: none; *@
@*         box-shadow: 0 2px 10px rgba(0,0,0,0.1); *@
@*     } *@
@* </style> *@
@* *@
@* @code { *@
@*     private RegistroPacienteModel model = new(); *@
@*      *@
@*     private readonly Dictionary<string, string> condicionesMedicas = new() *@
@*     { *@
@*         {"alzheimer", "Alzheimer"}, *@
@*         {"anorexia", "Anorexia"}, *@
@*         {"arthritis", "Artritis"}, *@
@*         {"autism", "Autismo"}, *@
@*         {"cancer", "Cáncer"}, *@
@*         {"depression", "Depresión"}, *@
@*         {"ibd", "Enfermedad inflamatoria intestinal"}, *@
@*         {"palliative", "Enfermedad incurable que requiera cuidado paliativo"}, *@
@*         {"degenerative", "Enfermedades Degenerativas"}, *@
@*         {"epilepsy", "Epilepsia"}, *@
@*         {"fibromyalgia", "Fibromialgia"}, *@
@*         {"glaucoma", "Glaucoma"}, *@
@*         {"hepatitis", "Hepatitis C"}, *@
@*         {"insomnia", "Insomnio"}, *@
@*         {"spinal", "Lesiones de cordón espinal"}, *@
@*         {"neuropathy", "Neuropatía periférica"}, *@
@*         {"parkinson", "Parkinson"}, *@
@*         {"hiv", "Relacionado a VIH positivo"}, *@
@*         {"aids", "Síndrome de Inmunodeficiencia Adquirida (SIDA)"}, *@
@*         {"ptsd", "Síndrome de Estrés Postraumático"}, *@
@*         {"bipolar", "Trastorno Bipolar"}, *@
@*         {"anxiety", "Trastornos de ansiedad"} *@
@*     }; *@
@* *@
@*     private readonly Dictionary<string, string> formasFarmaceuticas = new() *@
@*     { *@
@*         {"oils", "Aceites"}, *@
@*         {"gel-caps", "Cápsulas de gel"}, *@
@*         {"tablets", "Comprimido"}, *@
@*         {"cream", "Crema"}, *@
@*         {"extracts", "Extractos"}, *@
@*         {"flower", "Flor procesada"}, *@
@*         {"inhalers", "Inhaladores orales"}, *@
@*         {"patches", "Parches transdérmicos"}, *@
@*         {"pills", "Píldoras"}, *@
@*         {"ointment", "Ungüento"}, *@
@*         {"suppository", "Supositorio"}, *@
@*         {"tinctures", "Tinturas/gotas orales"} *@
@*     }; *@
@* *@
@*     private readonly Dictionary<string, string> viasAdministracion = new() *@
@*     { *@
@*         {"oral", "Oral (deglutida)"}, *@
@*         {"sublingual", "Sublingual"}, *@
@*         {"inhaled", "Inhalada"}, *@
@*         {"rectal", "Rectal"}, *@
@*         {"topical", "Tópica (piel, oftálmica, ótica)"}, *@
@*         {"subcutaneous", "Subcutánea"}, *@
@*         {"intravenous", "Intravenosa"}, *@
@*         {"intramuscular", "Intramuscular"}, *@
@*         {"intradermal", "Intradérmica"} *@
@*     }; *@
@* *@
@*     private readonly string[] unidadesMedida = { "g", "mg", "ml", "mg/ml", "%" }; *@
@* *@
@*     protected override void OnInitialized() *@
@*     { *@
@*         model.FechaSolicitud = DateTime.Today; *@
@*         model.TipoDocumento = "cedula"; *@
@*         model.TipoDocumentoAcompanante = "cedula"; *@
@*         model.DisciplinaMedico = "general"; *@
@*         model.UnidadCBD = "mg"; *@
@*         model.UnidadTHC = "mg"; *@
@*         model.VecesAlDia = 1; *@
@*     } *@
@* *@
@*     private void ToggleCondition(string conditionKey, bool isChecked) *@
@*     { *@
@*         if (isChecked) *@
@*         { *@
@*             if (!model.CondicionesMedicas.Contains(conditionKey)) *@
@*                 model.CondicionesMedicas.Add(conditionKey); *@
@*         } *@
@*         else *@
@*         { *@
@*             model.CondicionesMedicas.Remove(conditionKey); *@
@*         } *@
@*     } *@
@* *@
@*     private void ToggleFormaFarmaceutica(string formaKey, bool isChecked) *@
@*     { *@
@*         if (isChecked) *@
@*         { *@
@*             if (!model.FormasFarmaceuticas.Contains(formaKey)) *@
@*                 model.FormasFarmaceuticas.Add(formaKey); *@
@*         } *@
@*         else *@
@*         { *@
@*             model.FormasFarmaceuticas.Remove(formaKey); *@
@*         } *@
@*     } *@
@* *@
@*     private void ToggleViaAdministracion(string viaKey, bool isChecked) *@
@*     { *@
@*         if (isChecked) *@
@*         { *@
@*             if (!model.ViasAdministracion.Contains(viaKey)) *@
@*                 model.ViasAdministracion.Add(viaKey); *@
@*         } *@
@*         else *@
@*         { *@
@*             model.ViasAdministracion.Remove(viaKey); *@
@*         } *@
@*     } *@
@* *@
@*     private async Task HandleValidSubmit() *@
@*     { *@
@*         try *@
@*         { *@
@*             // Aquí puedes agregar la lógica para enviar los datos a tu API/servicio *@
@*             // Por ejemplo: await PacienteService.RegistrarPaciente(model); *@
@*              *@
@*             // Simulación de envío *@
@*             await Task.Delay(1000); *@
@*              *@
@*             // Mostrar mensaje de éxito (puedes usar un componente de notificación) *@
@*             await Task.Run(() => Console.WriteLine("Formulario enviado exitosamente")); *@
@*              *@
@*             // Opcional: Limpiar el formulario o redirigir *@
@*             // NavigationManager.NavigateTo("/confirmacion"); *@
@*         } *@
@*         catch (Exception ex) *@
@*         { *@
@*             // Manejar errores *@
@*             Console.WriteLine($"Error al enviar formulario: {ex.Message}"); *@
@*         } *@
@*     } *@
@* *@
@*     public class RegistroPacienteModel *@
@*     { *@
@*         [Required(ErrorMessage = "La fecha de solicitud es requerida")] *@
@*         public DateTime FechaSolicitud { get; set; } = DateTime.Today; *@
@* *@
@*         // Datos Personales del Solicitante *@
@*         [Required(ErrorMessage = "El nombre completo es requerido")] *@
@*         public string NombreCompleto { get; set; } = string.Empty; *@
@* *@
@*         public string TipoDocumento { get; set; } = "cedula"; *@
@* *@
@*         [Required(ErrorMessage = "El número de documento es requerido")] *@
@*         public string NumeroDocumento { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La nacionalidad es requerida")] *@
@*         public string Nacionalidad { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La fecha de nacimiento es requerida")] *@
@*         public DateTime FechaNacimiento { get; set; } *@
@* *@
@*         public string Sexo { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La residencia es requerida")] *@
@*         public string Residencia { get; set; } = string.Empty; *@
@* *@
@*         public string TelefonoResidencial { get; set; } = string.Empty; *@
@*         public string TelefonoPersonal { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "El correo electrónico es requerido")] *@
@*         [EmailAddress(ErrorMessage = "Formato de correo electrónico inválido")] *@
@*         public string CorreoElectronico { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La instalación de salud es requerida")] *@
@*         public string InstalacionSalud { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La región de salud es requerida")] *@
@*         public string RegionSalud { get; set; } = string.Empty; *@
@* *@
@*         public bool RequiereAcompanante { get; set; } = false; *@
@*         public string MotivoAcompanante { get; set; } = string.Empty; *@
@*         public string EspecificarDiscapacidad { get; set; } = string.Empty; *@
@* *@
@*         // Datos del Acompañante *@
@*         public string NombreAcompanante { get; set; } = string.Empty; *@
@*         public string TipoDocumentoAcompanante { get; set; } = "cedula"; *@
@*         public string NumeroDocumentoAcompanante { get; set; } = string.Empty; *@
@*         public string NacionalidadAcompanante { get; set; } = string.Empty; *@
@*         public string Parentesco { get; set; } = string.Empty; *@
@* *@
@*         // Datos del Médico *@
@*         [Required(ErrorMessage = "El nombre del médico es requerido")] *@
@*         public string NombreMedico { get; set; } = string.Empty; *@
@* *@
@*         public string DisciplinaMedico { get; set; } = "general"; *@
@*         public string EspecialidadMedico { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "El número de registro del médico es requerido")] *@
@*         public string NumeroRegistroMedico { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "El teléfono del médico es requerido")] *@
@*         public string TelefonoMedico { get; set; } = string.Empty; *@
@* *@
@*         [Required(ErrorMessage = "La instalación de salud del médico es requerida")] *@
@*         public string InstalacionSaludMedico { get; set; } = string.Empty; *@
@* *@
@*         // Cannabis Medicinal *@
@*         public List<string> CondicionesMedicas { get; set; } = new(); *@
@*         public string OtrasCondiciones { get; set; } = string.Empty; *@
@* *@
@*         public bool UsaCBD { get; set; } = false; *@
@*         public bool UsaTHC { get; set; } = false; *@
@*         public string OtrosProductos { get; set; } = string.Empty; *@
@*         public string NombreComercialProducto { get; set; } = string.Empty; *@
@* *@
@*         public List<string> FormasFarmaceuticas { get; set; } = new(); *@
@*         public string OtraFormaFarmaceutica { get; set; } = string.Empty; *@
@* *@
@*         public decimal? ConcentracionCBD { get; set; } *@
@*         public string UnidadCBD { get; set; } = "mg"; *@
@*         public string OtraUnidadCBD { get; set; } = string.Empty; *@
@* *@
@*         public decimal? ConcentracionTHC { get; set; } *@
@*         public string UnidadTHC { get; set; } = "mg"; *@
@*         public string OtraUnidadTHC { get; set; } = string.Empty; *@
@* *@
@*         public List<string> ViasAdministracion { get; set; } = new(); *@
@*         public string OtraViaAdministracion { get; set; } = string.Empty; *@
@* *@
@*         public string Dosis { get; set; } = string.Empty; *@
@*         public int VecesAlDia { get; set; } = 1; *@
@*         public bool DeRescate { get; set; } = false; *@
@*         public bool Semanal { get; set; } = false; *@
@*         public bool Quincenal { get; set; } = false; *@
@*         public bool Mensual { get; set; } = false; *@
@* *@
@*         // Otras Enfermedades *@
@*         public string OtrosDiagnosticos { get; set; } = string.Empty; *@
@*         public string OtrosTratamientos { get; set; } = string.Empty; *@
@* *@
@*         // Observaciones *@
@*         public string Observaciones { get; set; } = string.Empty; *@
@*     } *@
@* } *@